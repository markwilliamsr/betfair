package com.betfair.aping.events.betting;

import com.betfair.aping.com.betfair.aping.events.betting.Score;
import com.betfair.aping.com.betfair.aping.events.betting.ScoreEnum;
import com.betfair.aping.entities.Event;
import com.betfair.aping.entities.MarketBook;
import com.betfair.aping.entities.MarketCatalogue;
import com.betfair.aping.entities.MarketType;
import com.google.gson.Gson;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.HashMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;

/**
 * Created by markwilliams on 23/08/2014.
 */
public class ScoreTest {
    Gson gson = new Gson();
    private Logger logger = LoggerFactory.getLogger(ScoreTest.class);

    @Test
    public void getTotalGoalsTest() {
        Event e = new Event();
        Map<MarketType, MarketCatalogue> mcs = new HashMap<MarketType, MarketCatalogue>();
        mcs.put(MarketType.CORRECT_SCORE, new MarketCatalogue());
        e.setMarket(mcs);

        assertEquals(0, ScoreEnum.NIL_NIL.getTotalGoals());
        assertEquals(1, ScoreEnum.ONE_NIL.getTotalGoals());
        assertEquals(2, ScoreEnum.NIL_TWO.getTotalGoals());
        assertEquals(6, ScoreEnum.THREE_THREE.getTotalGoals());
    }

    public MarketBook makeMarketBook(String jsonMarketCatalogue) {
        MarketCatalogue mb = gson.fromJson(jsonMarketCatalogue, MarketCatalogue.class);
        return mb.getMarketBook();
    }

    public Event makeEvent(String jsonEvent) {
        Event e = gson.fromJson(jsonEvent, Event.class);
        return e;
    }

    @Test
    public void getCurrentScoreTest_0_0() {
        final String jsonEvent = "{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{\"OVER_UNDER_25\":{\"marketId\":\"1.115036531\",\"marketName\":\"Over/Under 2.5 Goals\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 25, 2014 8:00:00 PM\",\"suspendTime\":\"Aug 25, 2014 8:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"OVER_UNDER_25\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":47972,\"runnerName\":\"Under 2.5 Goals\",\"handicap\":0.0},{\"selectionId\":47973,\"runnerName\":\"Over 2.5 Goals\",\"handicap\":0.0}],\"competition\":{\"id\":\"31\",\"name\":\"Barclays Premier League\"},\"event\":{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115036531\",\"isMarketDataDelayed\":false,\"status\":\"OPEN\",\"betDelay\":5,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":2,\"numberOfActiveRunners\":2,\"lastMatchTime\":\"Aug 25, 2014 8:15:23 PM\",\"totalMatched\":1366025.76,\"totalAvailable\":468213.31,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":803897693,\"runners\":[{\"selectionId\":47972,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":1.98,\"totalMatched\":402569.13,\"ex\":{\"availableToBack\":[{\"price\":1.96,\"size\":1384.66},{\"price\":1.95,\"size\":1204.2},{\"price\":1.94,\"size\":705.44}],\"availableToLay\":[{\"price\":1.98,\"size\":4066.02},{\"price\":1.99,\"size\":950.74},{\"price\":2.0,\"size\":1114.97}],\"tradedVolume\":[]},\"orders\":[{\"betId\":\"40509052837\",\"orderType\":\"LIMIT\",\"status\":\"EXECUTION_COMPLETE\",\"persistenceType\":\"LAPSE\",\"side\":\"BACK\",\"price\":2.42,\"size\":2.0,\"bspLiability\":0.0,\"placedDate\":\"Aug 25, 2014 7:21:00 PM\",\"avgPriceMatched\":2.42,\"sizeMatched\":2.0,\"sizeRemaining\":0.0,\"sizeLapsed\":0.0,\"sizeCancelled\":0.0,\"sizeVoided\":0.0}],\"matches\":[]},{\"selectionId\":47973,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":2.02,\"totalMatched\":963456.62,\"ex\":{\"availableToBack\":[{\"price\":2.02,\"size\":5582.24},{\"price\":2.0,\"size\":2163.69},{\"price\":1.99,\"size\":316.6}],\"availableToLay\":[{\"price\":2.04,\"size\":1577.61},{\"price\":2.06,\"size\":2236.53},{\"price\":2.08,\"size\":1356.35}],\"tradedVolume\":[]}}]}},\"CORRECT_SCORE\":{\"marketId\":\"1.115036530\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 25, 2014 8:00:00 PM\",\"suspendTime\":\"Aug 25, 2014 8:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"31\",\"name\":\"Barclays Premier League\"},\"event\":{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115036530\",\"isMarketDataDelayed\":false,\"status\":\"OPEN\",\"betDelay\":5,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":17,\"numberOfActiveRunners\":17,\"lastMatchTime\":\"Aug 25, 2014 8:15:22 PM\",\"totalMatched\":853815.56,\"totalAvailable\":65045.67,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":803897101,\"runners\":[{\"selectionId\":1,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":13.0,\"totalMatched\":158751.95,\"ex\":{\"availableToBack\":[{\"price\":12.5,\"size\":1317.35},{\"price\":12.0,\"size\":996.68},{\"price\":11.5,\"size\":1110.46}],\"availableToLay\":[{\"price\":13.0,\"size\":139.22},{\"price\":13.5,\"size\":1947.16},{\"price\":14.0,\"size\":1778.15}],\"tradedVolume\":[]}},{\"selectionId\":4,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":15.5,\"totalMatched\":41214.06,\"ex\":{\"availableToBack\":[{\"price\":15.5,\"size\":131.62},{\"price\":15.0,\"size\":7.51},{\"price\":14.5,\"size\":279.44}],\"availableToLay\":[{\"price\":16.5,\"size\":9.55},{\"price\":17.0,\"size\":25.92},{\"price\":17.5,\"size\":61.7}],\"tradedVolume\":[]}},{\"selectionId\":9,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":32.0,\"totalMatched\":17888.41,\"ex\":{\"availableToBack\":[{\"price\":30.0,\"size\":104.0},{\"price\":28.0,\"size\":8.26},{\"price\":27.0,\"size\":150.25}],\"availableToLay\":[{\"price\":36.0,\"size\":38.21},{\"price\":38.0,\"size\":186.69},{\"price\":40.0,\"size\":3.52}],\"tradedVolume\":[]}},{\"selectionId\":16,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":95.0,\"totalMatched\":7060.15,\"ex\":{\"availableToBack\":[{\"price\":95.0,\"size\":16.25},{\"price\":90.0,\"size\":33.0},{\"price\":85.0,\"size\":18.0}],\"availableToLay\":[{\"price\":110.0,\"size\":73.29},{\"price\":130.0,\"size\":3.57},{\"price\":150.0,\"size\":4.85}],\"tradedVolume\":[]}},{\"selectionId\":2,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":9.4,\"totalMatched\":88569.21,\"ex\":{\"availableToBack\":[{\"price\":9.2,\"size\":67.88},{\"price\":9.0,\"size\":209.81},{\"price\":8.8,\"size\":65.49}],\"availableToLay\":[{\"price\":9.4,\"size\":357.09},{\"price\":9.6,\"size\":72.13},{\"price\":9.8,\"size\":107.96}],\"tradedVolume\":[]}},{\"selectionId\":3,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":8.2,\"totalMatched\":95519.27,\"ex\":{\"availableToBack\":[{\"price\":8.2,\"size\":78.9},{\"price\":8.0,\"size\":389.18},{\"price\":7.8,\"size\":194.67}],\"availableToLay\":[{\"price\":8.4,\"size\":401.29},{\"price\":8.6,\"size\":107.61},{\"price\":9.0,\"size\":154.14}],\"tradedVolume\":[]}},{\"selectionId\":8,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":16.0,\"totalMatched\":39314.47,\"ex\":{\"availableToBack\":[{\"price\":15.0,\"size\":298.59},{\"price\":14.5,\"size\":153.95},{\"price\":14.0,\"size\":60.47}],\"availableToLay\":[{\"price\":17.0,\"size\":32.87},{\"price\":17.5,\"size\":26.35},{\"price\":18.0,\"size\":66.06}],\"tradedVolume\":[]}},{\"selectionId\":15,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":42.0,\"totalMatched\":13446.39,\"ex\":{\"availableToBack\":[{\"price\":42.0,\"size\":2.93},{\"price\":32.0,\"size\":13.02},{\"price\":30.0,\"size\":99.1}],\"availableToLay\":[{\"price\":46.0,\"size\":2.0},{\"price\":48.0,\"size\":2.0},{\"price\":50.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":5,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":10.5,\"totalMatched\":65550.4,\"ex\":{\"availableToBack\":[{\"price\":10.5,\"size\":513.97},{\"price\":10.0,\"size\":1354.58},{\"price\":9.8,\"size\":643.63}],\"availableToLay\":[{\"price\":11.0,\"size\":9.13},{\"price\":11.5,\"size\":10.64},{\"price\":12.0,\"size\":441.0}],\"tradedVolume\":[]}},{\"selectionId\":6,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":10.0,\"totalMatched\":80989.58,\"ex\":{\"availableToBack\":[{\"price\":10.0,\"size\":96.9},{\"price\":9.8,\"size\":216.32},{\"price\":9.6,\"size\":339.27}],\"availableToLay\":[{\"price\":10.5,\"size\":170.14},{\"price\":11.0,\"size\":949.71},{\"price\":11.5,\"size\":582.3}],\"tradedVolume\":[]}},{\"selectionId\":7,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":18.5,\"totalMatched\":60981.85,\"ex\":{\"availableToBack\":[{\"price\":18.5,\"size\":99.94},{\"price\":18.0,\"size\":77.56},{\"price\":17.0,\"size\":7.06}],\"availableToLay\":[{\"price\":19.0,\"size\":4.81},{\"price\":19.5,\"size\":197.31},{\"price\":20.0,\"size\":94.98}],\"tradedVolume\":[]}},{\"selectionId\":14,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":55.0,\"totalMatched\":12795.54,\"ex\":{\"availableToBack\":[{\"price\":48.0,\"size\":81.88},{\"price\":40.0,\"size\":30.1},{\"price\":38.0,\"size\":2.63}],\"availableToLay\":[{\"price\":60.0,\"size\":4.99},{\"price\":75.0,\"size\":4.18},{\"price\":85.0,\"size\":12.46}],\"tradedVolume\":[]}},{\"selectionId\":10,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":19.0,\"totalMatched\":33545.57,\"ex\":{\"availableToBack\":[{\"price\":19.0,\"size\":398.64},{\"price\":18.5,\"size\":6.0},{\"price\":18.0,\"size\":109.77}],\"availableToLay\":[{\"price\":22.0,\"size\":32.06},{\"price\":23.0,\"size\":26.05},{\"price\":24.0,\"size\":257.58}],\"tradedVolume\":[]}},{\"selectionId\":11,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":17.5,\"totalMatched\":44092.53,\"ex\":{\"availableToBack\":[{\"price\":17.5,\"size\":94.03},{\"price\":17.0,\"size\":210.83},{\"price\":16.5,\"size\":199.71}],\"availableToLay\":[{\"price\":18.0,\"size\":17.19},{\"price\":18.5,\"size\":113.94},{\"price\":19.0,\"size\":79.57}],\"tradedVolume\":[]}},{\"selectionId\":12,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":34.0,\"totalMatched\":22535.35,\"ex\":{\"availableToBack\":[{\"price\":34.0,\"size\":12.26},{\"price\":32.0,\"size\":27.15},{\"price\":30.0,\"size\":8.57}],\"availableToLay\":[{\"price\":36.0,\"size\":83.41},{\"price\":38.0,\"size\":8.46},{\"price\":42.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":13,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":80.0,\"totalMatched\":11050.35,\"ex\":{\"availableToBack\":[{\"price\":80.0,\"size\":6.82},{\"price\":75.0,\"size\":2.99},{\"price\":70.0,\"size\":7.76}],\"availableToLay\":[{\"price\":85.0,\"size\":4.08},{\"price\":95.0,\"size\":30.04},{\"price\":110.0,\"size\":5.5}],\"tradedVolume\":[]}},{\"selectionId\":4506345,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":11.0,\"totalMatched\":60510.4,\"ex\":{\"availableToBack\":[{\"price\":11.0,\"size\":372.17},{\"price\":10.5,\"size\":3.0},{\"price\":10.0,\"size\":635.47}],\"availableToLay\":[{\"price\":12.0,\"size\":272.69},{\"price\":12.5,\"size\":610.92},{\"price\":13.0,\"size\":46.36}],\"tradedVolume\":[]}}]}}}}";

        Event e = makeEvent(jsonEvent);
        Score score = new Score(e);
        ScoreEnum correctScore = score.findScoreFromMarketOdds();
        logger.info("Correct Score is: " + correctScore);
        assertEquals(ScoreEnum.NIL_NIL, correctScore);
    }

    @Test
    public void totalGoalsTest0() {
        final String jsonEvent = "{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{\"OVER_UNDER_25\":{\"marketId\":\"1.115036531\",\"marketName\":\"Over/Under 2.5 Goals\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 25, 2014 8:00:00 PM\",\"suspendTime\":\"Aug 25, 2014 8:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"OVER_UNDER_25\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":47972,\"runnerName\":\"Under 2.5 Goals\",\"handicap\":0.0},{\"selectionId\":47973,\"runnerName\":\"Over 2.5 Goals\",\"handicap\":0.0}],\"competition\":{\"id\":\"31\",\"name\":\"Barclays Premier League\"},\"event\":{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115036531\",\"isMarketDataDelayed\":false,\"status\":\"OPEN\",\"betDelay\":5,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":2,\"numberOfActiveRunners\":2,\"lastMatchTime\":\"Aug 25, 2014 8:15:23 PM\",\"totalMatched\":1366025.76,\"totalAvailable\":468213.31,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":803897693,\"runners\":[{\"selectionId\":47972,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":1.98,\"totalMatched\":402569.13,\"ex\":{\"availableToBack\":[{\"price\":1.96,\"size\":1384.66},{\"price\":1.95,\"size\":1204.2},{\"price\":1.94,\"size\":705.44}],\"availableToLay\":[{\"price\":1.98,\"size\":4066.02},{\"price\":1.99,\"size\":950.74},{\"price\":2.0,\"size\":1114.97}],\"tradedVolume\":[]},\"orders\":[{\"betId\":\"40509052837\",\"orderType\":\"LIMIT\",\"status\":\"EXECUTION_COMPLETE\",\"persistenceType\":\"LAPSE\",\"side\":\"BACK\",\"price\":2.42,\"size\":2.0,\"bspLiability\":0.0,\"placedDate\":\"Aug 25, 2014 7:21:00 PM\",\"avgPriceMatched\":2.42,\"sizeMatched\":2.0,\"sizeRemaining\":0.0,\"sizeLapsed\":0.0,\"sizeCancelled\":0.0,\"sizeVoided\":0.0}],\"matches\":[]},{\"selectionId\":47973,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":2.02,\"totalMatched\":963456.62,\"ex\":{\"availableToBack\":[{\"price\":2.02,\"size\":5582.24},{\"price\":2.0,\"size\":2163.69},{\"price\":1.99,\"size\":316.6}],\"availableToLay\":[{\"price\":2.04,\"size\":1577.61},{\"price\":2.06,\"size\":2236.53},{\"price\":2.08,\"size\":1356.35}],\"tradedVolume\":[]}}]}},\"CORRECT_SCORE\":{\"marketId\":\"1.115036530\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 25, 2014 8:00:00 PM\",\"suspendTime\":\"Aug 25, 2014 8:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"31\",\"name\":\"Barclays Premier League\"},\"event\":{\"id\":\"27249641\",\"name\":\"Man City v Liverpool\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 25, 2014 8:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115036530\",\"isMarketDataDelayed\":false,\"status\":\"OPEN\",\"betDelay\":5,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":17,\"numberOfActiveRunners\":17,\"lastMatchTime\":\"Aug 25, 2014 8:15:22 PM\",\"totalMatched\":853815.56,\"totalAvailable\":65045.67,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":803897101,\"runners\":[{\"selectionId\":1,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":13.0,\"totalMatched\":158751.95,\"ex\":{\"availableToBack\":[{\"price\":12.5,\"size\":1317.35},{\"price\":12.0,\"size\":996.68},{\"price\":11.5,\"size\":1110.46}],\"availableToLay\":[{\"price\":13.0,\"size\":139.22},{\"price\":13.5,\"size\":1947.16},{\"price\":14.0,\"size\":1778.15}],\"tradedVolume\":[]}},{\"selectionId\":4,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":15.5,\"totalMatched\":41214.06,\"ex\":{\"availableToBack\":[{\"price\":15.5,\"size\":131.62},{\"price\":15.0,\"size\":7.51},{\"price\":14.5,\"size\":279.44}],\"availableToLay\":[{\"price\":16.5,\"size\":9.55},{\"price\":17.0,\"size\":25.92},{\"price\":17.5,\"size\":61.7}],\"tradedVolume\":[]}},{\"selectionId\":9,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":32.0,\"totalMatched\":17888.41,\"ex\":{\"availableToBack\":[{\"price\":30.0,\"size\":104.0},{\"price\":28.0,\"size\":8.26},{\"price\":27.0,\"size\":150.25}],\"availableToLay\":[{\"price\":36.0,\"size\":38.21},{\"price\":38.0,\"size\":186.69},{\"price\":40.0,\"size\":3.52}],\"tradedVolume\":[]}},{\"selectionId\":16,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":95.0,\"totalMatched\":7060.15,\"ex\":{\"availableToBack\":[{\"price\":95.0,\"size\":16.25},{\"price\":90.0,\"size\":33.0},{\"price\":85.0,\"size\":18.0}],\"availableToLay\":[{\"price\":110.0,\"size\":73.29},{\"price\":130.0,\"size\":3.57},{\"price\":150.0,\"size\":4.85}],\"tradedVolume\":[]}},{\"selectionId\":2,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":9.4,\"totalMatched\":88569.21,\"ex\":{\"availableToBack\":[{\"price\":9.2,\"size\":67.88},{\"price\":9.0,\"size\":209.81},{\"price\":8.8,\"size\":65.49}],\"availableToLay\":[{\"price\":9.4,\"size\":357.09},{\"price\":9.6,\"size\":72.13},{\"price\":9.8,\"size\":107.96}],\"tradedVolume\":[]}},{\"selectionId\":3,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":8.2,\"totalMatched\":95519.27,\"ex\":{\"availableToBack\":[{\"price\":8.2,\"size\":78.9},{\"price\":8.0,\"size\":389.18},{\"price\":7.8,\"size\":194.67}],\"availableToLay\":[{\"price\":8.4,\"size\":401.29},{\"price\":8.6,\"size\":107.61},{\"price\":9.0,\"size\":154.14}],\"tradedVolume\":[]}},{\"selectionId\":8,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":16.0,\"totalMatched\":39314.47,\"ex\":{\"availableToBack\":[{\"price\":15.0,\"size\":298.59},{\"price\":14.5,\"size\":153.95},{\"price\":14.0,\"size\":60.47}],\"availableToLay\":[{\"price\":17.0,\"size\":32.87},{\"price\":17.5,\"size\":26.35},{\"price\":18.0,\"size\":66.06}],\"tradedVolume\":[]}},{\"selectionId\":15,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":42.0,\"totalMatched\":13446.39,\"ex\":{\"availableToBack\":[{\"price\":42.0,\"size\":2.93},{\"price\":32.0,\"size\":13.02},{\"price\":30.0,\"size\":99.1}],\"availableToLay\":[{\"price\":46.0,\"size\":2.0},{\"price\":48.0,\"size\":2.0},{\"price\":50.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":5,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":10.5,\"totalMatched\":65550.4,\"ex\":{\"availableToBack\":[{\"price\":10.5,\"size\":513.97},{\"price\":10.0,\"size\":1354.58},{\"price\":9.8,\"size\":643.63}],\"availableToLay\":[{\"price\":11.0,\"size\":9.13},{\"price\":11.5,\"size\":10.64},{\"price\":12.0,\"size\":441.0}],\"tradedVolume\":[]}},{\"selectionId\":6,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":10.0,\"totalMatched\":80989.58,\"ex\":{\"availableToBack\":[{\"price\":10.0,\"size\":96.9},{\"price\":9.8,\"size\":216.32},{\"price\":9.6,\"size\":339.27}],\"availableToLay\":[{\"price\":10.5,\"size\":170.14},{\"price\":11.0,\"size\":949.71},{\"price\":11.5,\"size\":582.3}],\"tradedVolume\":[]}},{\"selectionId\":7,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":18.5,\"totalMatched\":60981.85,\"ex\":{\"availableToBack\":[{\"price\":18.5,\"size\":99.94},{\"price\":18.0,\"size\":77.56},{\"price\":17.0,\"size\":7.06}],\"availableToLay\":[{\"price\":19.0,\"size\":4.81},{\"price\":19.5,\"size\":197.31},{\"price\":20.0,\"size\":94.98}],\"tradedVolume\":[]}},{\"selectionId\":14,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":55.0,\"totalMatched\":12795.54,\"ex\":{\"availableToBack\":[{\"price\":48.0,\"size\":81.88},{\"price\":40.0,\"size\":30.1},{\"price\":38.0,\"size\":2.63}],\"availableToLay\":[{\"price\":60.0,\"size\":4.99},{\"price\":75.0,\"size\":4.18},{\"price\":85.0,\"size\":12.46}],\"tradedVolume\":[]}},{\"selectionId\":10,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":19.0,\"totalMatched\":33545.57,\"ex\":{\"availableToBack\":[{\"price\":19.0,\"size\":398.64},{\"price\":18.5,\"size\":6.0},{\"price\":18.0,\"size\":109.77}],\"availableToLay\":[{\"price\":22.0,\"size\":32.06},{\"price\":23.0,\"size\":26.05},{\"price\":24.0,\"size\":257.58}],\"tradedVolume\":[]}},{\"selectionId\":11,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":17.5,\"totalMatched\":44092.53,\"ex\":{\"availableToBack\":[{\"price\":17.5,\"size\":94.03},{\"price\":17.0,\"size\":210.83},{\"price\":16.5,\"size\":199.71}],\"availableToLay\":[{\"price\":18.0,\"size\":17.19},{\"price\":18.5,\"size\":113.94},{\"price\":19.0,\"size\":79.57}],\"tradedVolume\":[]}},{\"selectionId\":12,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":34.0,\"totalMatched\":22535.35,\"ex\":{\"availableToBack\":[{\"price\":34.0,\"size\":12.26},{\"price\":32.0,\"size\":27.15},{\"price\":30.0,\"size\":8.57}],\"availableToLay\":[{\"price\":36.0,\"size\":83.41},{\"price\":38.0,\"size\":8.46},{\"price\":42.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":13,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":80.0,\"totalMatched\":11050.35,\"ex\":{\"availableToBack\":[{\"price\":80.0,\"size\":6.82},{\"price\":75.0,\"size\":2.99},{\"price\":70.0,\"size\":7.76}],\"availableToLay\":[{\"price\":85.0,\"size\":4.08},{\"price\":95.0,\"size\":30.04},{\"price\":110.0,\"size\":5.5}],\"tradedVolume\":[]}},{\"selectionId\":4506345,\"handicap\":0.0,\"status\":\"ACTIVE\",\"lastPriceTraded\":11.0,\"totalMatched\":60510.4,\"ex\":{\"availableToBack\":[{\"price\":11.0,\"size\":372.17},{\"price\":10.5,\"size\":3.0},{\"price\":10.0,\"size\":635.47}],\"availableToLay\":[{\"price\":12.0,\"size\":272.69},{\"price\":12.5,\"size\":610.92},{\"price\":13.0,\"size\":46.36}],\"tradedVolume\":[]}}]}}}}";
        final String jsonMarketCatalogue = "{\"marketId\":\"1.115021672\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 24, 2014 1:30:00 PM\",\"suspendTime\":\"Aug 24, 2014 1:30:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"31\",\"name\":\"Barclays Premier League\"},\"event\":{\"id\":\"27249344\",\"name\":\"Hull v Stoke\",\"countryCode\":\"GB\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 24, 2014 1:30:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115021672\",\"isMarketDataDelayed\":true,\"status\":\"OPEN\",\"betDelay\":0,\"bspReconciled\":false,\"complete\":true,\"inplay\":false,\"numberOfWinners\":1,\"numberOfRunners\":17,\"numberOfActiveRunners\":17,\"totalMatched\":12554.27,\"totalAvailable\":51762.78,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":795199682,\"runners\":[{\"selectionId\":1,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":7.8,\"size\":1766.37},{\"price\":7.6,\"size\":731.57},{\"price\":7.4,\"size\":511.98}],\"availableToLay\":[{\"price\":8.0,\"size\":1325.98},{\"price\":8.2,\"size\":1679.19},{\"price\":8.4,\"size\":824.55}],\"tradedVolume\":[]}},{\"selectionId\":4,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":9.0,\"size\":124.47},{\"price\":8.8,\"size\":774.68},{\"price\":8.6,\"size\":267.27}],\"availableToLay\":[{\"price\":9.2,\"size\":81.48},{\"price\":9.4,\"size\":242.0},{\"price\":9.6,\"size\":6.03}],\"tradedVolume\":[]}},{\"selectionId\":9,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":19.0,\"size\":122.49},{\"price\":18.5,\"size\":378.46},{\"price\":18.0,\"size\":155.21}],\"availableToLay\":[{\"price\":19.5,\"size\":77.9},{\"price\":21.0,\"size\":101.48},{\"price\":22.0,\"size\":154.79}],\"tradedVolume\":[]}},{\"selectionId\":16,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":60.0,\"size\":37.1},{\"price\":55.0,\"size\":223.72},{\"price\":50.0,\"size\":21.18}],\"availableToLay\":[{\"price\":75.0,\"size\":206.32},{\"price\":80.0,\"size\":47.64},{\"price\":90.0,\"size\":2.41}],\"tradedVolume\":[]}},{\"selectionId\":2,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":7.4,\"size\":1702.02},{\"price\":7.2,\"size\":208.32},{\"price\":7.0,\"size\":615.97}],\"availableToLay\":[{\"price\":7.6,\"size\":604.57},{\"price\":7.8,\"size\":301.46},{\"price\":8.0,\"size\":261.18}],\"tradedVolume\":[]}},{\"selectionId\":3,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":7.0,\"size\":2979.28},{\"price\":6.8,\"size\":1495.89},{\"price\":6.6,\"size\":263.58}],\"availableToLay\":[{\"price\":7.2,\"size\":4959.14},{\"price\":7.4,\"size\":1677.58},{\"price\":7.6,\"size\":1595.9}],\"tradedVolume\":[]}},{\"selectionId\":8,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":15.0,\"size\":195.68},{\"price\":14.5,\"size\":820.5},{\"price\":14.0,\"size\":233.59}],\"availableToLay\":[{\"price\":15.5,\"size\":118.53},{\"price\":16.0,\"size\":209.89},{\"price\":16.5,\"size\":18.0}],\"tradedVolume\":[]}},{\"selectionId\":15,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":46.0,\"size\":118.96},{\"price\":44.0,\"size\":173.44},{\"price\":40.0,\"size\":2.0}],\"availableToLay\":[{\"price\":50.0,\"size\":2.0},{\"price\":55.0,\"size\":354.16},{\"price\":60.0,\"size\":83.87}],\"tradedVolume\":[]}},{\"selectionId\":5,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":13.5,\"size\":26.0},{\"price\":13.0,\"size\":998.94},{\"price\":12.5,\"size\":424.89}],\"availableToLay\":[{\"price\":14.0,\"size\":561.17},{\"price\":14.5,\"size\":526.08},{\"price\":15.0,\"size\":199.71}],\"tradedVolume\":[]}},{\"selectionId\":6,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":12.0,\"size\":1120.65},{\"price\":11.5,\"size\":398.68},{\"price\":11.0,\"size\":150.0}],\"availableToLay\":[{\"price\":12.5,\"size\":87.9},{\"price\":13.0,\"size\":406.88},{\"price\":13.5,\"size\":22.0}],\"tradedVolume\":[]}},{\"selectionId\":7,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":24.0,\"size\":11.13},{\"price\":23.0,\"size\":414.13},{\"price\":22.0,\"size\":106.83}],\"availableToLay\":[{\"price\":25.0,\"size\":49.55},{\"price\":26.0,\"size\":287.47},{\"price\":27.0,\"size\":30.0}],\"tradedVolume\":[]}},{\"selectionId\":14,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":75.0,\"size\":2.27},{\"price\":70.0,\"size\":142.77},{\"price\":65.0,\"size\":32.57}],\"availableToLay\":[{\"price\":85.0,\"size\":155.52},{\"price\":90.0,\"size\":35.14},{\"price\":120.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":10,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":34.0,\"size\":81.57},{\"price\":32.0,\"size\":302.46},{\"price\":30.0,\"size\":25.0}],\"availableToLay\":[{\"price\":36.0,\"size\":21.36},{\"price\":38.0,\"size\":29.87},{\"price\":40.0,\"size\":245.53}],\"tradedVolume\":[]}},{\"selectionId\":11,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":32.0,\"size\":214.95},{\"price\":30.0,\"size\":164.48},{\"price\":29.0,\"size\":70.0}],\"availableToLay\":[{\"price\":34.0,\"size\":24.96},{\"price\":36.0,\"size\":270.02},{\"price\":38.0,\"size\":80.68}],\"tradedVolume\":[]}},{\"selectionId\":12,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":60.0,\"size\":79.59},{\"price\":55.0,\"size\":117.67},{\"price\":50.0,\"size\":44.88}],\"availableToLay\":[{\"price\":65.0,\"size\":153.64},{\"price\":70.0,\"size\":136.84},{\"price\":75.0,\"size\":47.93}],\"tradedVolume\":[]}},{\"selectionId\":13,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":140.0,\"size\":34.03},{\"price\":130.0,\"size\":24.84},{\"price\":110.0,\"size\":10.0}],\"availableToLay\":[{\"price\":160.0,\"size\":9.54},{\"price\":170.0,\"size\":140.17},{\"price\":180.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":4506345,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":22.0,\"size\":276.54},{\"price\":21.0,\"size\":196.23},{\"price\":20.0,\"size\":110.5}],\"availableToLay\":[{\"price\":24.0,\"size\":312.05},{\"price\":25.0,\"size\":222.87},{\"price\":26.0,\"size\":3.19}],\"tradedVolume\":[]}}]}}";

        Event e = makeEvent(jsonEvent);
        MarketBook mb = makeMarketBook(jsonMarketCatalogue);
        e.getMarket().get(MarketType.CORRECT_SCORE).setMarketBook(mb);

        Score score = new Score(e);
        int goals = score.getTotalGoals();

        logger.info("Number of Goals: " + goals);
        assertEquals(0, goals);
    }

    @Test
    public void totalGoalsTest1() {
        final String jsonEvent = "{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{\"OVER_UNDER_25\":{\"marketId\":\"1.114712530\",\"marketName\":\"Over/Under 2.5 Goals\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"OVER_UNDER_25\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":47972,\"runnerName\":\"Under 2.5 Goals\",\"handicap\":0.0},{\"selectionId\":47973,\"runnerName\":\"Over 2.5 Goals\",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}}},\"CORRECT_SCORE\":{\"marketId\":\"1.115009630\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}}}}}";
        final String jsonMarketCatalogue = "{\"marketId\":\"1.115009630\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115009630\",\"isMarketDataDelayed\":true,\"status\":\"OPEN\",\"betDelay\":9,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":17,\"numberOfActiveRunners\":17,\"totalMatched\":78388.25,\"totalAvailable\":20935.9,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":802282491,\"runners\":[{\"selectionId\":1,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":48.18},{\"price\":160.0,\"size\":3.19},{\"price\":1.4,\"size\":22.71}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":4,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.64},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":9,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.56},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":16,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.64},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":2,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":3.0,\"size\":614.46},{\"price\":2.98,\"size\":1721.62},{\"price\":2.96,\"size\":71.89}],\"availableToLay\":[{\"price\":3.05,\"size\":24.0},{\"price\":3.1,\"size\":737.15},{\"price\":3.15,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":3,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":6.6,\"size\":2.0},{\"price\":6.4,\"size\":370.16},{\"price\":6.0,\"size\":251.15}],\"availableToLay\":[{\"price\":7.0,\"size\":40.34},{\"price\":7.4,\"size\":7.98},{\"price\":7.6,\"size\":274.09}],\"tradedVolume\":[]}},{\"selectionId\":8,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":38.0,\"size\":84.3},{\"price\":36.0,\"size\":30.12},{\"price\":32.0,\"size\":46.68}],\"availableToLay\":[{\"price\":44.0,\"size\":4.86},{\"price\":46.0,\"size\":17.57},{\"price\":50.0,\"size\":15.97}],\"tradedVolume\":[]}},{\"selectionId\":15,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":280.0,\"size\":10.69},{\"price\":270.0,\"size\":5.92},{\"price\":260.0,\"size\":2.0}],\"availableToLay\":[{\"price\":470.0,\"size\":23.49},{\"price\":590.0,\"size\":2.0},{\"price\":640.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":5,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":4.4,\"size\":44.83},{\"price\":4.3,\"size\":605.88},{\"price\":4.2,\"size\":35.46}],\"availableToLay\":[{\"price\":4.6,\"size\":2.0},{\"price\":4.7,\"size\":2.67},{\"price\":4.8,\"size\":51.05}],\"tradedVolume\":[]}},{\"selectionId\":6,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":10.0,\"size\":339.13},{\"price\":9.8,\"size\":121.82},{\"price\":9.6,\"size\":158.18}],\"availableToLay\":[{\"price\":11.0,\"size\":15.32},{\"price\":11.5,\"size\":171.13},{\"price\":12.0,\"size\":71.89}],\"tradedVolume\":[]}},{\"selectionId\":7,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":44.0,\"size\":51.03},{\"price\":42.0,\"size\":2.0},{\"price\":38.0,\"size\":28.5}],\"availableToLay\":[{\"price\":65.0,\"size\":175.02},{\"price\":70.0,\"size\":11.18},{\"price\":75.0,\"size\":10.38}],\"tradedVolume\":[]}},{\"selectionId\":14,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":430.0,\"size\":2.0},{\"price\":420.0,\"size\":2.0},{\"price\":410.0,\"size\":2.0}],\"availableToLay\":[{\"price\":900.0,\"size\":9.68},{\"price\":990.0,\"size\":2.0},{\"price\":1000.0,\"size\":11.28}],\"tradedVolume\":[]}},{\"selectionId\":10,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":12.0,\"size\":129.82},{\"price\":11.5,\"size\":169.12},{\"price\":11.0,\"size\":83.88}],\"availableToLay\":[{\"price\":13.0,\"size\":50.9},{\"price\":13.5,\"size\":2.0},{\"price\":14.0,\"size\":38.09}],\"tradedVolume\":[]}},{\"selectionId\":11,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":29.0,\"size\":73.18},{\"price\":28.0,\"size\":44.05},{\"price\":27.0,\"size\":42.55}],\"availableToLay\":[{\"price\":38.0,\"size\":155.68},{\"price\":40.0,\"size\":19.97},{\"price\":42.0,\"size\":19.17}],\"tradedVolume\":[]}},{\"selectionId\":12,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":130.0,\"size\":23.42},{\"price\":120.0,\"size\":10.85},{\"price\":110.0,\"size\":11.67}],\"availableToLay\":[{\"price\":190.0,\"size\":53.41},{\"price\":330.0,\"size\":2.0},{\"price\":360.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":13,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":80.31},{\"price\":1.8,\"size\":71.01},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":4506345,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":26.0,\"size\":121.92},{\"price\":25.0,\"size\":45.93},{\"price\":24.0,\"size\":45.84}],\"availableToLay\":[{\"price\":34.0,\"size\":37.55},{\"price\":36.0,\"size\":10.0},{\"price\":40.0,\"size\":19.97}],\"tradedVolume\":[]}}]}}";

        Event e = makeEvent(jsonEvent);
        MarketBook mb = makeMarketBook(jsonMarketCatalogue);
        e.getMarket().get(MarketType.CORRECT_SCORE).setMarketBook(mb);

        Score score = new Score(e);
        int goals = score.getTotalGoals();

        logger.info("Number of Goals: " + goals);
        assertEquals(1, goals);
    }

    @Test
    public void getCurrentScoreTest_1_0() {
        final String jsonEvent = "{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{\"OVER_UNDER_25\":{\"marketId\":\"1.114712530\",\"marketName\":\"Over/Under 2.5 Goals\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"OVER_UNDER_25\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":47972,\"runnerName\":\"Under 2.5 Goals\",\"handicap\":0.0},{\"selectionId\":47973,\"runnerName\":\"Over 2.5 Goals\",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}}},\"CORRECT_SCORE\":{\"marketId\":\"1.115009630\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}}}}}";
        final String jsonMarketCatalogue = "{\"marketId\":\"1.115009630\",\"marketName\":\"Correct Score\",\"description\":{\"persistenceEnabled\":true,\"bspMarket\":false,\"marketTime\":\"Aug 23, 2014 10:00:00 PM\",\"suspendTime\":\"Aug 23, 2014 10:00:00 PM\",\"bettingType\":\"ODDS\",\"turnInPlayEnabled\":true,\"marketType\":\"CORRECT_SCORE\",\"marketBaseRate\":5.0,\"discountAllowed\":true,\"wallet\":\"UK wallet\",\"rules\":\"\",\"rulesHasDate\":true},\"runners\":[{\"selectionId\":1,\"runnerName\":\"0 - 0\",\"handicap\":0.0},{\"selectionId\":4,\"runnerName\":\"0 - 1\",\"handicap\":0.0},{\"selectionId\":9,\"runnerName\":\"0 - 2\",\"handicap\":0.0},{\"selectionId\":16,\"runnerName\":\"0 - 3\",\"handicap\":0.0},{\"selectionId\":2,\"runnerName\":\"1 - 0\",\"handicap\":0.0},{\"selectionId\":3,\"runnerName\":\"1 - 1\",\"handicap\":0.0},{\"selectionId\":8,\"runnerName\":\"1 - 2\",\"handicap\":0.0},{\"selectionId\":15,\"runnerName\":\"1 - 3\",\"handicap\":0.0},{\"selectionId\":5,\"runnerName\":\"2 - 0\",\"handicap\":0.0},{\"selectionId\":6,\"runnerName\":\"2 - 1\",\"handicap\":0.0},{\"selectionId\":7,\"runnerName\":\"2 - 2\",\"handicap\":0.0},{\"selectionId\":14,\"runnerName\":\"2 - 3\",\"handicap\":0.0},{\"selectionId\":10,\"runnerName\":\"3 - 0\",\"handicap\":0.0},{\"selectionId\":11,\"runnerName\":\"3 - 1\",\"handicap\":0.0},{\"selectionId\":12,\"runnerName\":\"3 - 2\",\"handicap\":0.0},{\"selectionId\":13,\"runnerName\":\"3 - 3\",\"handicap\":0.0},{\"selectionId\":4506345,\"runnerName\":\"Any Unquoted \",\"handicap\":0.0}],\"competition\":{\"id\":\"117\",\"name\":\"Primera Division\"},\"event\":{\"id\":\"27237571\",\"name\":\"Almeria v Espanyol\",\"countryCode\":\"ES\",\"timezone\":\"Europe/London\",\"openDate\":\"Aug 23, 2014 10:00:00 PM\",\"market\":{}},\"marketBook\":{\"marketId\":\"1.115009630\",\"isMarketDataDelayed\":true,\"status\":\"OPEN\",\"betDelay\":9,\"bspReconciled\":false,\"complete\":true,\"inplay\":true,\"numberOfWinners\":1,\"numberOfRunners\":17,\"numberOfActiveRunners\":17,\"totalMatched\":78388.25,\"totalAvailable\":20935.9,\"crossMatching\":true,\"runnersVoidable\":false,\"version\":802282491,\"runners\":[{\"selectionId\":1,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":48.18},{\"price\":160.0,\"size\":3.19},{\"price\":1.4,\"size\":22.71}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":4,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.64},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":9,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.56},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":16,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":53.64},{\"price\":160.0,\"size\":3.19},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":2,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":3.0,\"size\":614.46},{\"price\":2.98,\"size\":1721.62},{\"price\":2.96,\"size\":71.89}],\"availableToLay\":[{\"price\":3.05,\"size\":24.0},{\"price\":3.1,\"size\":737.15},{\"price\":3.15,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":3,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":6.6,\"size\":2.0},{\"price\":6.4,\"size\":370.16},{\"price\":6.0,\"size\":251.15}],\"availableToLay\":[{\"price\":7.0,\"size\":40.34},{\"price\":7.4,\"size\":7.98},{\"price\":7.6,\"size\":274.09}],\"tradedVolume\":[]}},{\"selectionId\":8,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":38.0,\"size\":84.3},{\"price\":36.0,\"size\":30.12},{\"price\":32.0,\"size\":46.68}],\"availableToLay\":[{\"price\":44.0,\"size\":4.86},{\"price\":46.0,\"size\":17.57},{\"price\":50.0,\"size\":15.97}],\"tradedVolume\":[]}},{\"selectionId\":15,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":280.0,\"size\":10.69},{\"price\":270.0,\"size\":5.92},{\"price\":260.0,\"size\":2.0}],\"availableToLay\":[{\"price\":470.0,\"size\":23.49},{\"price\":590.0,\"size\":2.0},{\"price\":640.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":5,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":4.4,\"size\":44.83},{\"price\":4.3,\"size\":605.88},{\"price\":4.2,\"size\":35.46}],\"availableToLay\":[{\"price\":4.6,\"size\":2.0},{\"price\":4.7,\"size\":2.67},{\"price\":4.8,\"size\":51.05}],\"tradedVolume\":[]}},{\"selectionId\":6,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":10.0,\"size\":339.13},{\"price\":9.8,\"size\":121.82},{\"price\":9.6,\"size\":158.18}],\"availableToLay\":[{\"price\":11.0,\"size\":15.32},{\"price\":11.5,\"size\":171.13},{\"price\":12.0,\"size\":71.89}],\"tradedVolume\":[]}},{\"selectionId\":7,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":44.0,\"size\":51.03},{\"price\":42.0,\"size\":2.0},{\"price\":38.0,\"size\":28.5}],\"availableToLay\":[{\"price\":65.0,\"size\":175.02},{\"price\":70.0,\"size\":11.18},{\"price\":75.0,\"size\":10.38}],\"tradedVolume\":[]}},{\"selectionId\":14,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":430.0,\"size\":2.0},{\"price\":420.0,\"size\":2.0},{\"price\":410.0,\"size\":2.0}],\"availableToLay\":[{\"price\":900.0,\"size\":9.68},{\"price\":990.0,\"size\":2.0},{\"price\":1000.0,\"size\":11.28}],\"tradedVolume\":[]}},{\"selectionId\":10,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":12.0,\"size\":129.82},{\"price\":11.5,\"size\":169.12},{\"price\":11.0,\"size\":83.88}],\"availableToLay\":[{\"price\":13.0,\"size\":50.9},{\"price\":13.5,\"size\":2.0},{\"price\":14.0,\"size\":38.09}],\"tradedVolume\":[]}},{\"selectionId\":11,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":29.0,\"size\":73.18},{\"price\":28.0,\"size\":44.05},{\"price\":27.0,\"size\":42.55}],\"availableToLay\":[{\"price\":38.0,\"size\":155.68},{\"price\":40.0,\"size\":19.97},{\"price\":42.0,\"size\":19.17}],\"tradedVolume\":[]}},{\"selectionId\":12,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":130.0,\"size\":23.42},{\"price\":120.0,\"size\":10.85},{\"price\":110.0,\"size\":11.67}],\"availableToLay\":[{\"price\":190.0,\"size\":53.41},{\"price\":330.0,\"size\":2.0},{\"price\":360.0,\"size\":2.0}],\"tradedVolume\":[]}},{\"selectionId\":13,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":1000.0,\"size\":80.31},{\"price\":1.8,\"size\":71.01},{\"price\":1.02,\"size\":152.58}],\"availableToLay\":[],\"tradedVolume\":[]}},{\"selectionId\":4506345,\"handicap\":0.0,\"status\":\"ACTIVE\",\"totalMatched\":0.0,\"ex\":{\"availableToBack\":[{\"price\":26.0,\"size\":121.92},{\"price\":25.0,\"size\":45.93},{\"price\":24.0,\"size\":45.84}],\"availableToLay\":[{\"price\":34.0,\"size\":37.55},{\"price\":36.0,\"size\":10.0},{\"price\":40.0,\"size\":19.97}],\"tradedVolume\":[]}}]}}";

        Event e = makeEvent(jsonEvent);
        MarketBook mb = makeMarketBook(jsonMarketCatalogue);
        e.getMarket().get(MarketType.CORRECT_SCORE).setMarketBook(mb);
        Score score = new Score(e);
        ScoreEnum correctScore = score.findScoreFromMarketOdds();
        logger.info("Correct Score is: " + correctScore);
        assertEquals(ScoreEnum.ONE_NIL, correctScore);
    }
}
